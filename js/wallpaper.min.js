//HEADER====================================================================================
// Раскрываем - закрываем бургер============
document.addEventListener('click', function (e) {
	let burger = document.querySelector('.icon-menu');
	let menu = document.querySelector('.menu');
	let plashMask = document.querySelector('.backgroundMask');
	let body = document.querySelector('body');
	// закрываем на фон
	if (e.target.classList.contains('backgroundMask')) {
		burger.classList.remove('_active');
		menu.classList.remove('_active');
		body.classList.remove('_lock');
		plashMask.style = 'display: none;';
	}
	// закрываем на крестик
	if (e.target.closest('.icon-menu-active')) {
		burger.classList.remove('_active');
		menu.classList.remove('_active');
		body.classList.remove('_lock');
		plashMask.style = 'display: none;'
	}

	// открываем бургер
	if (e.target.closest('.icon-menu')) {
		burger.classList.toggle('_active');
		menu.classList.toggle('_active');
		body.classList.add('_lock');
		plashMask.style = 'display: block;'
	}
});

// ==================================
//headerPageStart----------------------------------------------------------------------
let deleteActiveTabAndBody = () => {
	let tabPage = document.querySelectorAll('.tab-page');
	let tabMore = document.querySelectorAll('.tab-more');
	let bodyPage = document.querySelectorAll('.calc-count');
	let inpBlockPage = document.querySelectorAll('.inp-block_change');
	tabPage.forEach((elem) => {
		if (elem.classList.contains('_active')) {
			elem.classList.remove('_active')
		}
	});
	tabMore.forEach((elem) => {
		if (elem.classList.contains('_active')) {
			elem.classList.remove('_active')
		}
	});
	bodyPage.forEach((elem) => {
		if (elem.classList.contains('_active')) {
			elem.classList.remove('_active')
		}
	});
	inpBlockPage.forEach((elem) => {
		if (elem.classList.contains('_active')) {
			elem.classList.remove('_active')
		}
	});
}

let addRoom = () => {
	deleteActiveTabAndBody()
	let roomTab = document.querySelector('#room-tab');
	let roomBody = document.querySelector('#room-body');
	let roomBlock = document.querySelector('#room-block');
	roomTab.classList.add('_active');
	roomBody.classList.add('_active');
	roomBlock.classList.add('_active');
}
let addWall = () => {
	deleteActiveTabAndBody()
	let wallTab = document.querySelector('#wall-tab');
	let wallBody = document.querySelector('#room-body');
	let wallBlock = document.querySelector('#wall-block');
	wallTab.classList.add('_active');
	wallBlock.classList.add('_active');
	wallBody.classList.add('_active');
}

let addDetails = () => {
	deleteActiveTabAndBody()
	let detailsTab = document.querySelector('#details-tab');
	let detailsBody = document.querySelector('#details-body');
	detailsTab.classList.add('_active');
	detailsBody.classList.add('_active');
}
let addInstruction = () => {
	deleteActiveTabAndBody()
	let instructionTab = document.querySelector('#instruction-tab');
	let instructionBody = document.querySelector('#instruction-body');
	instructionTab.classList.add('_active');
	instructionBody.classList.add('_active');
}


if (localStorage.getItem('pageHeaderSave') === 'room') {
	addRoom();
}
if (localStorage.getItem('pageHeaderSave') === 'wall') {
	addWall();
}
if (localStorage.getItem('pageHeaderSave') === 'details') {
	addDetails();
}
if (localStorage.getItem('pageHeaderSave') === 'instruction') {
	addInstruction();
}


document.addEventListener('click', (e) => {
	// подчеркивание кнопки, открытие секции нужной вкладки
	if (e.target.closest('#room-tab')) {
		addRoom();
		localStorage.setItem('pageHeaderSave', 'room')
	}
	if (e.target.closest('#wall-tab')) {
		addWall();
		localStorage.setItem('pageHeaderSave', 'wall')
	}
	if (e.target.closest('#details-tab')) {
		addDetails();
		localStorage.setItem('pageHeaderSave', 'details')
	}
	if (e.target.closest('#instruction-tab')) {
		addInstruction();
		localStorage.setItem('pageHeaderSave', 'instruction')
	}
	//адаптация инструкции и детали 
	if (e.target.closest('#icon-info-mobile')) {
		let infoMobile = document.querySelector('#info-body-mobile');
		infoMobile.classList.toggle('_active');
	}
	if (!e.target.closest('#icon-info-mobile') && !e.target.closest('#info-body-mobile') && document.querySelector('#info-body-mobile').classList.contains('_active')) {
		let infoMobile = document.querySelector('#info-body-mobile');
		infoMobile.classList.remove('_active');
	}
	//radio-btn
	if (e.target.closest('.radio__inp')) {
		radioDel(e);
		let radioLabel = e.target.nextElementSibling;
		radioLabel.classList.add('_active');
	}
});



document.addEventListener('focusout', (e) => {
	if (e.target.closest('#custom_rulon-width')) {
		let inpCustomRulonWidth = document.querySelector('#custom_rulon-width');
		if (inpCustomRulonWidth.value !== '0' && inpCustomRulonWidth.value !== '') {
			radioDel(e);
		}
	}
	if (e.target.closest('#custom_rulon-length')) {
		let inpCustomRulonLength = document.querySelector('#custom_rulon-length');
		if (inpCustomRulonLength.value !== '0' && inpCustomRulonLength.value !== '') {
			radioDel(e);
		}
	}
	if (e.target.closest('#custom_stock')) {
		let inpCustomRulonLength = document.querySelector('#custom_stock');
		if (inpCustomRulonLength.value !== '0' && inpCustomRulonLength.value !== '') {
			let radioBody = e.target.parentNode.parentNode.parentNode.parentNode;
			let allRadio = radioBody.querySelectorAll('.radio__text');
			allRadio.forEach((elem) => {
				if (elem.classList.contains('_active')) {
					elem.classList.remove('_active')
				}
			});
		}
	}
});

radioDel = (e) => {
	let radioBody = e.target.parentNode.parentNode.parentNode;
	let allRadio = radioBody.querySelectorAll('.radio__text');
	allRadio.forEach((elem) => {
		if (elem.classList.contains('_active')) {
			elem.classList.remove('_active')
		}
	});
}



